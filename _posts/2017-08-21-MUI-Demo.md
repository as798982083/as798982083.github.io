---
layout:     post
title:      "MUI学习笔记"
subtitle:   "Upgrading Ele.me to Progressive Web App"
date:       2017-08-21 12:00:00
author:     "zcj"
header-img: "img/in-post/post-eleme-pwa/eleme-at-io.jpg"
header-mask: 0.3
catalog:    true
tags:
    - 前端开发
    - JavaScript
    - PWA
---

目录

[TOC]

每个知识点都有一个最简的实现代码。  
每N个知识点会有一个整合的小Demo。  

## 一、折叠面板

折叠面板示例图：  
![折叠框](/img/mui/accordion.gif)  

最简代码：

    <ul class="mui-table-view"> 
        <li class="mui-table-view-cell mui-collapse mui-active">
            <a class="mui-navigate-right" href="#">面板1</a>
            <div class="mui-collapse-content">
                <p>面板1子内容</p>
            </div>
        </li>
        <li class="mui-table-view-cell mui-collapse">
            <a class="mui-navigate-right" href="#">面板2</a>
            <div class="mui-collapse-content">
                <p>面板2子内容</p>
            </div>
        </li>
    </ul>
    
`.mui-table-view`和`.mui-table-view-cell`: 必不可少。  
`.mui-collapse`: 表示该选项可折叠(收起来)。  
`.mui-active`: 与`.mui-collase`合用，表示列表默认打开。  
`.mui-navigate-right`: 在最右边显示一个箭头。

## 二、输入框

总共有五种输入框类型，如图：  
![输入框汇总](/img/mui/input3.gif)  

最简代码：

    <form class="mui-input-group">
	    <div class="mui-input-row mui-search">
			<input type="search" class="mui-input-clear" placeholder="搜索框" />
		</div>
		<div class="mui-input-row">
			<label>input</label>
			<input type="text" class="" placeholder="普通输入框"/>
		</div>
		<div class="mui-input-row">
			<label>input</label>
			<input type="text" class="mui-input-clear" placeholder="带清除按钮的输入框" />
		</div>
		<div class="mui-input-row">
			<label>input</label>
			<input type="text" class="mui-input-speech" placeholder="语音输入" />
		</div>
		<div class="mui-input-row">
			<label>input</label>
			<input type="password" class="mui-input-password" placeholder="密码输入" />
		</div>
	</form>

`.mui-input-group`: input框放在这个class标签下，会有美化的效果。  
`.mui-input-row`： 美化时用来区分input框的每一行。  
`.mui-search`: 与`.mui-input-row`放在同一级，子标签的input属性type使用search，就可以使用搜索框。input的class属性可以用来设置搜索输入框的属性。具体有以下三种（可组合使用）：  
`.mui-input-clear`: 带有清除按钮的输入框。  
`.mui-input-speech`: 带有语音输入按钮的输入框。  
`.mui-input-password`: 与type的password属性一起使用，是带有隐藏密码功能的输入框。  

注：使用`.mui-input-group`可以美化输入框的排列，一下为使用和不使用的区别：  

![美化的输入框](/img/mui/input2.png)
![不美化的输入框汇](/img/mui/input1.png)

## 三、操作表

弹出框示例图：  
![弹出框](/img/mui/actionsheet.gif)  

最简代码：

    <div id="sheet1" class="mui-popover mui-popover-action">
	    <!-- 可选择菜单 -->
	    <ul class="mui-table-view">
	      <li class="mui-table-view-cell">
	        <a href="#">菜单1</a>
	      </li>
	      <li class="mui-table-view-cell">
	        <a href="#">菜单2</a>
	      </li>
	    </ul>
	    <!-- 取消菜单 -->
	    <ul class="mui-table-view">
	      <li class="mui-table-view-cell">
	        <a href="#sheet1"><b>取消</b></a>
	      </li>
	    </ul>
	</div>
	<button type="button" onclick="show();">show</button>
	<script type="text/javascript">
		function show () {
			mui('#sheet1').popover('toggle');//控制菜单的显示与隐藏
		}
	</script>
 
`.mui-popover`: 表明该部分作为弹出框显示。  
`.mui-popover-action`: 弹出框在底部显示，不加该类，则在按钮所在位置显示弹出框。

## 四、数字角标

数字角标示例图：  
![数字角标](/img/mui/badges.png)

最简代码：

    <ul class="mui-table-view">
		<li class="mui-table-view-cell">
			item1<span class="mui-badge">1</span>
		</li>
		<li class="mui-table-view-cell">
			item2<span class="mui-badge mui-badge-primary">12</span>
		</li>
		<li class="mui-table-view-cell">
			item3<span class="mui-badge mui-badge-success">123</span>
		</li>
		<li class="mui-table-view-cell">
			item4<span class="mui-badge mui-badge-warning">3</span>
		</li>
		<li class="mui-table-view-cell">
			item5<span class="mui-badge mui-badge-danger">45</span>
		</li>
		<li class="mui-table-view-cell">
			item6<span class="mui-badge mui-badge-purple mui-badge-inverted">456</span>
		</li>
	</ul>

`.mui-badge`:  角标的核心类,默认为实心灰色背景。  
`.mui-badge-primary`: 内置了蓝色（blue）、绿色(green)、黄色(yellow)、红色(red)、紫色(purple)五种色系的数字角标。  
`.mui-badge-inverted`： 隐藏底色，只显示数字的颜色，如上item6。  

## 五、按钮

### 普通按钮
普通按钮示例图：  
![普通按钮](/img/mui/buttons.png)

最简代码：

    <button type="button" class="mui-btn">默认</button>
	<button type="button" class="mui-btn mui-btn-primary">蓝色</button>
	<button type="button" class="mui-btn mui-btn-success">绿色</button>
	<button type="button" class="mui-btn mui-btn-warning">黄色</button>
	<button type="button" class="mui-btn mui-btn-danger mui-btn-outlined">红色</button>
	<button type="button" class="mui-btn mui-btn-royal mui-btn-outlined">紫色</button> 

`.mui-btn`: 使用该类，即可生成一个默认的按钮。  
`.mui-btn-primary`: 按钮有五种色系蓝、绿、黄、红、紫，对应五种场景`primary`、`success`、`warning`、`danger`、`royal`。  
`.mui-btn-outlined`: 隐藏底色，只显示带颜色的边框和文字。

### 加载中按钮
加载中按钮示例图：  
![加载中按钮](/img/mui/button-loading.gif)

最简代码：

    <button id="btn" type="button" 
		data-loading-icon="mui-spinner mui-spinner-	custom" 
		data-loading-text="loading" 
		data-loading-icon-position="left" 
			class="mui-btn mui-btn-primary">确认</button>
	<script type="text/javascript">
		mui(document.body).on('tap', '#btn', function(e) {
	    mui(this).button('loading');
	    setTimeout(function() {
		        mui(this).button('reset');
		    }.bind(this), 2000);
		});
	</script>

`data-loading-icon`: loading 状态显示的icon,默认为`mui-spinner`或`mui-spinner mui-spinner-white`（根据按钮样式自动识别），为空表示不使用icon.  
`data-loading-text`: loading 状态显示的文案,默认为: loading.  
`data-loading-icon-position`: loading 状态显示的icon的位置,支持left/right默认left.  

**JS API**  
DCloud封装的`tap`功能，替代了`onclick`功能。  
`mui(this).button('loading')`: 获取当前MUI标签，改变当前状态为loading。  
`mui(this).button('reset')`: 同上，改变当前状态为初始状态。  
`setTimeout(function(){},2000)`： 延迟2秒执行该函数。  

## 六、卡片式图

卡片式图示例图：  
![卡片式图](/img/mui/cardview.gif)
	
最简代码：

    <div class="mui-card">
		<!--页眉，放置标题-->
		<div class="mui-card-header mui-card-media">
			<img src="images/jimitu.gif" />
			<div class="mui-media-body">
				机密兔
				<p>发表于 2018-08-21 23:26</p>
			</div>
		</div>
		<!--内容区-->
		<div class="mui-card-content">
			<img src="images/jimitu.gif" style="height: 100%;width: 100%;"/>
			爱宠大机密里的机密兔，很可爱。
		</div>
		<!--页脚，放置补充信息或支持的操作-->
		<div class="mui-card-footer">
			<button type="button" class="mui-btn mui-btn-primary mui-btn-outlined">喜欢</button>
			<button type="button" class="mui-btn mui-btn-royal mui-btn-outlined">评论</button>
			<button type="button" class="mui-btn mui-btn-danger mui-btn-outlined">不喜欢</button>
		</div>
	</div>

`.mui-card`: 生成一个卡片容器，包括页眉、内容、页脚三部分。  
`.mui-card-header`: 页眉部分，可放置文字+图片。若要放置图片，需加上`.mui-card-media`。  
`.mui-media-body`: 页眉中可自定义的部分，用于放置标题、副标题等自定义的内容。     
`.mui-card-content`: 内容部分，可直接放置文字+图片。
`.mui-card-footer`: 页脚不可添加图片。  

## 七、复选框

复选框示例图：  
![复选框](/img/mui/checkbox.gif)  

最简代码：

    <div class="mui-input-group">
		<div class="mui-input-row mui-checkbox">
		  <label>checkbox示例</label>
		  <input type="checkbox" name="checkbox1" value="Item 1" checked>
		</div>
		
		<div class="mui-input-row mui-checkbox mui-left">
		  <label>checkbox左侧显示示例</label>
		  <input type="checkbox" name="checkbox1" value="Item 1">
		</div>
		
		<div class="mui-input-row mui-checkbox">
		  <label>checkbox禁用示例</label>
		  <input type="checkbox" name="checkbox1" value="Item 1" disabled="disabled">
		</div>
	</div>

`.mui-input-group`: 美化`.mui-input-row`所在的标签。  
`.mui-checkbox`: 美化复选框的显示。  
`.mui-left`: 默认的复选框在右侧，加上该类，则在左侧显示。  
`checked`: 默认勾选复选框。  
`disabled="disabled"`: 标签禁用（但可以显示）。

## 八、消息框

消息框示例图：  
![消息框](/img/mui/dialog.gif)  

最简代码：

    <button id="alert" class="mui-btn mui-btn-blue mui-btn-outlined">alert</button>
	<button id="confirm" class="mui-btn mui-btn-blue mui-btn-outlined">confirm</button>
	<button id="prompt" class="mui-btn mui-btn-blue mui-btn-outlined">prompt</button>
	<button id="toast" class="mui-btn mui-btn-blue mui-btn-outlined">toast</button>
	<br />
	<label id="showTest">这里显示回调函数的结果。</label>
	<script type="text/javascript">
		mui(document.body).on('tap',"#alert",function(e) {
			mui.alert("alert你一下","titla","按钮文字",function (e) {
			});
		});
		mui(document.body).on('tap',"#confirm",function (e) {
			mui.confirm("Are you boy?","title",['确定','取消'],function (e) {
			});
		});
		mui(document.body).on('tap',"#prompt",function (e) {
			mui.prompt("这是输入对话框","placeholder","title",['确定','取消'],function (e) {
				
			},'div');
		});
		mui(document.body).on('tap',"#toast",function (e) {
			mui.toast('登录成功',{duration:'long',type:'div'});
		});
	</script>
**代码解释 JS API：**  
`mui.alert(message,title,btnValue,callback[,type])`: 参数分别为：对话框内容，对话框标题，按钮上的文字，回调函数，是否使用h5绘制的对话框。  
`mui.confirm(message,title,btnValue,callback[,type])`: 参数同上。  
`mui.prompt(message,placeholder,title,btnValue,callback[,type])`: 参数分别为：对话框内容，提示文字，标题，按钮文字，回调函数，是否使用h5绘制的对话框。  
`.closePopup()`: 关闭最后一次弹出的对话框（仅限h5模式的对话框）。  
`.closePopups()`: 关闭所有对话框（仅限h5模式的对话框）。  
> 带上`mui.`前缀的`alert`等对话框，都是原生的对话框，不加该前缀的为h5模式的对话框。

## 九、图片轮播

图片轮播示例图：  
![图片轮播](/img/mui/gallery.gif)  

最简代码：  

    <div class="mui-slider">
		<div class="mui-slider-group mui-slider-loop">
			<div class="mui-slider-item"><a href="#"><img src="images/pets (4).jpg" /></a></div>
			<div class="mui-slider-item"><a href="#"><img src="images/pets (1).jpg" /></a></div>
			<div class="mui-slider-item"><a href="#"><img src="images/pets (2).jpg" /></a></div>
			<div class="mui-slider-item"><a href="#"><img src="images/pets (3).jpg" /></a></div>
			<div class="mui-slider-item"><a href="#"><img src="images/pets (4).jpg" /></a></div>
			<div class="mui-slider-item"><a href="#"><img src="images/pets (1).jpg" /></a></div>
		</div>
	</div>
	<script type="text/javascript">
		var gallery = mui('.mui-slider');
		gallery.slider({
			interval:100//自动轮播周期，若为0则不自动播放，默认为0；
		});
	</script>

**代码解释：**  
`.mui-slider-group`: 图片轮播容器。  
`.mui-slider-loop`: 与`.mui-slider-group`放在同一级，表示容器内的图片可以循环播放。如果要循环播放，则需要在头尾增加两张重复的图片。  
`.mui-slider-item`: 图片元素。  
**JS API：**  
`mui('.mui-slider').slider({interval:100});`: mui框架内封装的轮播JS API，实现100毫秒轮播间隔。  
> 若轮播组件的内容为js动态加载的（如通过ajax动态加载），则需要在动态加载完组件内容后，手动调用上述JS API，以实现轮播效果。
 
## 十、栅格

官方API有变动，而文档尚未更新。。。

## 十一、图标

[icon官方图标](http://dev.dcloud.net.cn/mui/ui/#icon)

最简代码：  

    <span class="mui-icon mui-icon-weixin"></span>

## 十二、列表

列表示例图：  
![列表](/img/mui/list.gif)  

最简代码：

    <ul class="mui-table-view">
	    <li class="mui-table-view-cell">
	    	<a class="mui-navigate-right">
	    		Item 1
	    	</a>
	    </li>
	    <li class="mui-table-view-cell">
	    	Item 2
	    	<span class="mui-badge mui-badge-danger">9</span>
	    </li>
	    <li class="mui-table-view-cell">Item 3</li>
	</ul>
	<ul class="mui-table-view">
		<li class="mui-table-view-cell mui-media">
			<a href="javascript:;">
				<img class="mui-media-object mui-pull-left" src="images/pets (1).jpg"/>
				<div class="mui-media-body">
					幸福
					<p class="mui-ellipsis">回家撸猫~</p>
				</div>
			</a>
		</li>
		<li class="mui-table-view-cell mui-media">
			<a href="javascript:;">
				<img class="mui-media-object mui-pull-right" src="images/pets (2).jpg"/>
				<div class="mui-media-body">
					快乐
					<p class="mui-ellipsis">回家撸狗狗，会不会被咬</p>
				</div>
			</a>
		</li>
	</ul>

**代码解释：**  
`.mui-table-view`: `ul`标签上添加该类，并在`li`标签上添加`.mui-table-view-cell`类，即可实现最简单的列表控件。  
`.mui-navigate-right`: 在`li`标签内添加`a`标签，并使用该类，会在右侧显示小箭头。  
`mui-badge`: mui支持将数字角标(`mui-badge`)、按钮(`mui-btn`)、开关(`mui-switch`)等控件放在列表中，默认放在右侧。  
`mui-media`: 允许放置图文列表，注意该类的同级类。  
`mui-object`: 对象，可以是图片。  
`mui-pull-left`: 设置object的显示位置，默认为左边。  
`mui-media-body`: 主体部分。  
`mui-ellipsis`: 该部分的内容在无法全部显示的情况下会省略。  

## 十三、

